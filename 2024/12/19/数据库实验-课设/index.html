<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>数据库实验 &amp; 课设 | zx's Blog</title><meta name="author" content="zx"><meta name="copyright" content="zx"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="数据库实验1、opengauss数据库环境安装根据文档安装即可，不过我使用的是docker， 镜像为enmotech&#x2F;opengauss:latest，然后配合dbeaver使用 2、opengauss场景化综合应用实验不是很难，但是步骤很多，很烦 首先要创建数据库，这个就不多说了，使用gui创建或者sql命令都行 创建client表 12345678910111213141516171">
<meta property="og:type" content="article">
<meta property="og:title" content="数据库实验 &amp; 课设">
<meta property="og:url" content="https://zx2023qj.github.io/2024/12/19/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%9E%E9%AA%8C-%E8%AF%BE%E8%AE%BE/index.html">
<meta property="og:site_name" content="zx&#39;s Blog">
<meta property="og:description" content="数据库实验1、opengauss数据库环境安装根据文档安装即可，不过我使用的是docker， 镜像为enmotech&#x2F;opengauss:latest，然后配合dbeaver使用 2、opengauss场景化综合应用实验不是很难，但是步骤很多，很烦 首先要创建数据库，这个就不多说了，使用gui创建或者sql命令都行 创建client表 12345678910111213141516171">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://zx2023qj.github.io/img/3.jpg">
<meta property="article:published_time" content="2024-12-19T03:24:55.000Z">
<meta property="article:modified_time" content="2024-12-26T17:58:38.159Z">
<meta property="article:author" content="zx">
<meta property="article:tag" content="日常">
<meta property="article:tag" content="作业">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://zx2023qj.github.io/img/3.jpg"><link rel="shortcut icon" href="/img/3.jpg"><link rel="canonical" href="https://zx2023qj.github.io/2024/12/19/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%9E%E9%AA%8C-%E8%AF%BE%E8%AE%BE/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '数据库实验 & 课设',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-12-27 01:58:38'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.0.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/3.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">41</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">35</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">23</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/2.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="zx's Blog"><span class="site-name">zx's Blog</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">数据库实验 &amp; 课设</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-12-19T03:24:55.000Z" title="发表于 2024-12-19 11:24:55">2024-12-19</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-12-26T17:58:38.159Z" title="更新于 2024-12-27 01:58:38">2024-12-27</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%AF%BE%E7%A8%8B%E5%AD%A6%E4%B9%A0/">课程学习</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="数据库实验 &amp; 课设"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="数据库实验"><a href="#数据库实验" class="headerlink" title="数据库实验"></a>数据库实验</h2><h3 id="1、opengauss数据库环境安装"><a href="#1、opengauss数据库环境安装" class="headerlink" title="1、opengauss数据库环境安装"></a>1、opengauss数据库环境安装</h3><p>根据文档安装即可，不过我使用的是docker，</p>
<p>镜像为enmotech&#x2F;opengauss:latest，然后配合dbeaver使用</p>
<h3 id="2、opengauss场景化综合应用实验"><a href="#2、opengauss场景化综合应用实验" class="headerlink" title="2、opengauss场景化综合应用实验"></a>2、opengauss场景化综合应用实验</h3><p>不是很难，但是步骤很多，很烦</p>
<p>首先要创建数据库，这个就不多说了，使用gui创建或者sql命令都行</p>
<p><strong>创建client表</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">-- 如果存在 client 表，则先删除它</span><br><span class="line">DROP TABLE IF EXISTS client;</span><br><span class="line"></span><br><span class="line">-- 创建 client 表</span><br><span class="line">CREATE TABLE client (</span><br><span class="line">    c_id INTEGER PRIMARY KEY,          </span><br><span class="line">    c_name VARCHAR(100) NOT NULL,     </span><br><span class="line">    c_mail CHAR(30) UNIQUE,          </span><br><span class="line">    c_id_card CHAR(20) UNIQUE NOT NULL, </span><br><span class="line">    c_phone CHAR(20) UNIQUE NOT NULL, </span><br><span class="line">    c_password CHAR(20) NOT NULL      </span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 为字段添加注释</span><br><span class="line">COMMENT ON COLUMN client.c_id IS &#x27;客户编码&#x27;;</span><br><span class="line">COMMENT ON COLUMN client.c_name IS &#x27;客户名称&#x27;;</span><br><span class="line">COMMENT ON COLUMN client.c_mail IS &#x27;客户邮箱&#x27;;</span><br><span class="line">COMMENT ON COLUMN client.c_id_card IS &#x27;客户身份证&#x27;;</span><br><span class="line">COMMENT ON COLUMN client.c_phone IS &#x27;客户手机号&#x27;;</span><br><span class="line">COMMENT ON COLUMN client.c_password IS &#x27;客户登录密码&#x27;;</span><br></pre></td></tr></table></figure>

<p><strong>创建band_card表</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">-- 如果存在 bank_card 表，则先删除它</span><br><span class="line">DROP TABLE IF EXISTS bank_card;</span><br><span class="line"></span><br><span class="line">-- 创建 bank_card 表</span><br><span class="line">CREATE TABLE bank_card (</span><br><span class="line">    b_number CHAR(30) PRIMARY KEY,          -- 银行卡号，作为主键</span><br><span class="line">    b_type CHAR(20),                        -- 银行卡类型</span><br><span class="line">    b_c_id INTEGER NOT NULL,                -- 所属客户编号，不能为空</span><br><span class="line">    FOREIGN KEY (b_c_id) REFERENCES client(c_id) -- 外键，引用 client 表的 c_id 字段</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 为字段添加注释</span><br><span class="line">COMMENT ON COLUMN bank_card.b_number IS &#x27;银行卡号&#x27;;</span><br><span class="line">COMMENT ON COLUMN bank_card.b_type IS &#x27;银行卡类型&#x27;;</span><br><span class="line">COMMENT ON COLUMN bank_card.b_c_id IS &#x27;所属客户编号&#x27;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>创建finances_product表</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">-- 如果存在 finances_product 表，则先删除它</span><br><span class="line">DROP TABLE IF EXISTS finances_product;</span><br><span class="line"></span><br><span class="line">-- 创建 finances_product 表</span><br><span class="line">CREATE TABLE finances_product (</span><br><span class="line">    p_name VARCHAR(100) NOT NULL,         -- 产品名称</span><br><span class="line">    p_id INTEGER PRIMARY KEY,              -- 产品编号，作为主键</span><br><span class="line">    p_description VARCHAR(4000),           -- 产品描述</span><br><span class="line">    p_amount INTEGER,                       -- 购买金额</span><br><span class="line">    p_year INTEGER                         -- 理财年限</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 为字段添加注释</span><br><span class="line">COMMENT ON COLUMN finances_product.p_name IS &#x27;产品名称&#x27;;</span><br><span class="line">COMMENT ON COLUMN finances_product.p_id IS &#x27;产品编号&#x27;;</span><br><span class="line">COMMENT ON COLUMN finances_product.p_description IS &#x27;产品描述&#x27;;</span><br><span class="line">COMMENT ON COLUMN finances_product.p_amount IS &#x27;购买金额&#x27;;</span><br><span class="line">COMMENT ON COLUMN finances_product.p_year IS &#x27;理财年限&#x27;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>创建insurance表</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">-- 如果存在 insurance 表，则先删除它</span><br><span class="line">DROP TABLE IF EXISTS insurance;</span><br><span class="line"></span><br><span class="line">-- 创建 insurance 表</span><br><span class="line">CREATE TABLE insurance (</span><br><span class="line">    i_name VARCHAR(100) NOT NULL,         -- 保险名称</span><br><span class="line">    i_id INTEGER PRIMARY KEY,              -- 保险编号，作为主键</span><br><span class="line">    i_amount INTEGER,                       -- 保险金额</span><br><span class="line">    i_person CHAR(20),                     -- 适用人群</span><br><span class="line">    i_year INTEGER,                        -- 保险年限</span><br><span class="line">    i_project VARCHAR(200)                 -- 保障项目</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 为字段添加注释</span><br><span class="line">COMMENT ON COLUMN insurance.i_name IS &#x27;保险名称&#x27;;</span><br><span class="line">COMMENT ON COLUMN insurance.i_id IS &#x27;保险编号&#x27;;</span><br><span class="line">COMMENT ON COLUMN insurance.i_amount IS &#x27;保险金额&#x27;;</span><br><span class="line">COMMENT ON COLUMN insurance.i_person IS &#x27;适用人群&#x27;;</span><br><span class="line">COMMENT ON COLUMN insurance.i_year IS &#x27;保险年限&#x27;;</span><br><span class="line">COMMENT ON COLUMN insurance.i_project IS &#x27;保障项目&#x27;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>创建fund表</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">-- 如果存在 fund 表，则先删除它</span><br><span class="line">DROP TABLE IF EXISTS fund;</span><br><span class="line"></span><br><span class="line">-- 创建 fund 表</span><br><span class="line">CREATE TABLE fund (</span><br><span class="line">    f_name VARCHAR(100) NOT NULL,         -- 基金名称</span><br><span class="line">    f_id INTEGER PRIMARY KEY,              -- 基金编号，作为主键</span><br><span class="line">    f_type CHAR(20),                       -- 基金类型</span><br><span class="line">    f_amount INTEGER,                       -- 基金金额</span><br><span class="line">    risk_level CHAR(20) NOT NULL,         -- 风险等级</span><br><span class="line">    f_manager INTEGER NOT NULL              -- 基金管理者</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 为字段添加注释</span><br><span class="line">COMMENT ON COLUMN fund.f_name IS &#x27;基金名称&#x27;;</span><br><span class="line">COMMENT ON COLUMN fund.f_id IS &#x27;基金编号&#x27;;</span><br><span class="line">COMMENT ON COLUMN fund.f_type IS &#x27;基金类型&#x27;;</span><br><span class="line">COMMENT ON COLUMN fund.f_amount IS &#x27;基金金额&#x27;;</span><br><span class="line">COMMENT ON COLUMN fund.risk_level IS &#x27;风险等级&#x27;;</span><br><span class="line">COMMENT ON COLUMN fund.f_manager IS &#x27;基金管理者&#x27;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>创建property表</strong></p>
<p>property表中由于需要使用pro_type对pro_pif_id进行引用表的判断，因此没有在创建表时就定义好引用。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">-- 如果存在 property 表，则先删除它</span><br><span class="line">DROP TABLE IF EXISTS property;</span><br><span class="line"></span><br><span class="line">-- 创建 property 表</span><br><span class="line">CREATE TABLE property (</span><br><span class="line">    pro_id INTEGER PRIMARY KEY,              -- 资产编号，作为主键</span><br><span class="line">    pro_c_id VARCHAR(100) NOT NULL,         -- 客户编号，不能为空</span><br><span class="line">    pro_pif_id INTEGER NOT NULL,             -- 商品编号，不能为空</span><br><span class="line">    pro_type INTEGER NOT NULL CHECK (pro_type IN (1, 2, 3)), -- 商品类型，1表示理财产品；2表示保险；3表示基金</span><br><span class="line">    pro_status CHAR(20),                     -- 商品状态</span><br><span class="line">    pro_quantity INTEGER,                     -- 商品数量</span><br><span class="line">    pro_income INTEGER,                       -- 商品收益</span><br><span class="line">    pro_purchase_time DATE,                  -- 购买时间</span><br><span class="line">    FOREIGN KEY (pro_c_id) REFERENCES client(c_id) -- 外键，引用 client 表的 c_id 字段</span><br><span class="line">    -- 不在这里定义 pro_pif_id 的外键约束</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 为字段添加注释</span><br><span class="line">COMMENT ON COLUMN property.pro_id IS &#x27;资产编号&#x27;;</span><br><span class="line">COMMENT ON COLUMN property.pro_c_id IS &#x27;客户编号&#x27;;</span><br><span class="line">COMMENT ON COLUMN property.pro_pif_id IS &#x27;商品编号&#x27;;</span><br><span class="line">COMMENT ON COLUMN property.pro_type IS &#x27;商品类型，1表示理财产品；2表示保险；3表示基金&#x27;;</span><br><span class="line">COMMENT ON COLUMN property.pro_status IS &#x27;商品状态&#x27;;</span><br><span class="line">COMMENT ON COLUMN property.pro_quantity IS &#x27;商品数量&#x27;;</span><br><span class="line">COMMENT ON COLUMN property.pro_income IS &#x27;商品收益&#x27;;</span><br><span class="line">COMMENT ON COLUMN property.pro_purchase_time IS &#x27;购买时间&#x27;;</span><br></pre></td></tr></table></figure>

<p><strong>初始化client表</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO client (c_id, c_name, c_mail, c_id_card, c_phone, c_password) VALUES</span><br><span class="line">(1, &#x27;张三&#x27;, &#x27;zhangsan@example.com&#x27;, &#x27;123456789012345678&#x27;, &#x27;13800000001&#x27;, &#x27;password1&#x27;),</span><br><span class="line">(2, &#x27;李四&#x27;, &#x27;lisi@example.com&#x27;, &#x27;123456789012345679&#x27;, &#x27;13800000002&#x27;, &#x27;password2&#x27;),</span><br><span class="line">(3, &#x27;王五&#x27;, &#x27;wangwu@example.com&#x27;, &#x27;123456789012345680&#x27;, &#x27;13800000003&#x27;, &#x27;password3&#x27;),</span><br><span class="line">(4, &#x27;赵六&#x27;, &#x27;zhaoliu@example.com&#x27;, &#x27;123456789012345681&#x27;, &#x27;13800000004&#x27;, &#x27;password4&#x27;),</span><br><span class="line">(5, &#x27;钱七&#x27;, &#x27;qianqi@example.com&#x27;, &#x27;123456789012345682&#x27;, &#x27;13800000005&#x27;, &#x27;password5&#x27;),</span><br><span class="line">(6, &#x27;孙八&#x27;, &#x27;sunba@example.com&#x27;, &#x27;123456789012345683&#x27;, &#x27;13800000006&#x27;, &#x27;password6&#x27;),</span><br><span class="line">(7, &#x27;周九&#x27;, &#x27;zhoujiu@example.com&#x27;, &#x27;123456789012345684&#x27;, &#x27;13800000007&#x27;, &#x27;password7&#x27;),</span><br><span class="line">(8, &#x27;吴十&#x27;, &#x27;wushi@example.com&#x27;, &#x27;123456789012345685&#x27;, &#x27;13800000008&#x27;, &#x27;password8&#x27;),</span><br><span class="line">(9, &#x27;郑十一&#x27;, &#x27;zheng11@example.com&#x27;, &#x27;123456789012345686&#x27;, &#x27;13800000009&#x27;, &#x27;password9&#x27;),</span><br><span class="line">(10, &#x27;冯十二&#x27;, &#x27;feng12@example.com&#x27;, &#x27;123456789012345687&#x27;, &#x27;13800000010&#x27;, &#x27;password10&#x27;);</span><br></pre></td></tr></table></figure>

<p><strong>初始化bank_card表</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO bank_card (b_number, b_type, b_c_id) VALUES</span><br><span class="line">(&#x27;6222021001000001&#x27;, &#x27;储蓄卡&#x27;, 1),</span><br><span class="line">(&#x27;6222021001000002&#x27;, &#x27;信用卡&#x27;, 2),</span><br><span class="line">(&#x27;6222021001000003&#x27;, &#x27;储蓄卡&#x27;, 3),</span><br><span class="line">(&#x27;6222021001000004&#x27;, &#x27;信用卡&#x27;, 4),</span><br><span class="line">(&#x27;6222021001000005&#x27;, &#x27;储蓄卡&#x27;, 5),</span><br><span class="line">(&#x27;6222021001000006&#x27;, &#x27;储蓄卡&#x27;, 6),</span><br><span class="line">(&#x27;6222021001000007&#x27;, &#x27;信用卡&#x27;, 7),</span><br><span class="line">(&#x27;6222021001000008&#x27;, &#x27;储蓄卡&#x27;, 8),</span><br><span class="line">(&#x27;6222021001000009&#x27;, &#x27;信用卡&#x27;, 9),</span><br><span class="line">(&#x27;6222021001000010&#x27;, &#x27;储蓄卡&#x27;, 10);</span><br></pre></td></tr></table></figure>

<p><strong>初始化finances_product表</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO finances_product (p_name, p_id, p_description, p_amount, p_year) VALUES</span><br><span class="line">(&#x27;稳健型理财1号&#x27;, 1, &#x27;适合低风险投资者的稳健型理财产品，年化收益约为3%。&#x27;, 10000, 1),</span><br><span class="line">(&#x27;稳健型理财2号&#x27;, 2, &#x27;低风险短期理财产品，资金灵活流动，年化收益约为3.5%。&#x27;, 20000, 2),</span><br><span class="line">(&#x27;进取型理财1号&#x27;, 3, &#x27;适合中风险投资者的理财产品，年化收益约为5%。&#x27;, 30000, 3),</span><br><span class="line">(&#x27;进取型理财2号&#x27;, 4, &#x27;中风险中收益产品，资金适中，年化收益约为5.5%。&#x27;, 50000, 3),</span><br><span class="line">(&#x27;高收益型理财1号&#x27;, 5, &#x27;高风险高收益产品，适合追求高回报的投资者，年化收益约为7%。&#x27;, 100000, 5),</span><br><span class="line">(&#x27;高收益型理财2号&#x27;, 6, &#x27;高风险理财产品，投资期长，年化收益可达8%。&#x27;, 150000, 5),</span><br><span class="line">(&#x27;保本型理财1号&#x27;, 7, &#x27;低风险保本产品，资金安全有保障，年化收益约为2.5%。&#x27;, 5000, 1),</span><br><span class="line">(&#x27;保本型理财2号&#x27;, 8, &#x27;中长期保本型理财产品，适合稳健投资者，年化收益约为3%。&#x27;, 10000, 3),</span><br><span class="line">(&#x27;灵活型理财1号&#x27;, 9, &#x27;灵活投资型理财产品，可随时赎回，年化收益约为4%。&#x27;, 20000, 2),</span><br><span class="line">(&#x27;灵活型理财2号&#x27;, 10, &#x27;灵活资金管理产品，短期收益高，年化收益约为4.5%。&#x27;, 30000, 1);</span><br></pre></td></tr></table></figure>

<p><strong>初始化insurance表</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO insurance (i_name, i_id, i_amount, i_person, i_year, i_project) VALUES</span><br><span class="line">(&#x27;基础医疗保险&#x27;, 1, 5000, &#x27;个人&#x27;, 1, &#x27;住院报销、门诊费用报销&#x27;),</span><br><span class="line">(&#x27;全面健康险&#x27;, 2, 20000, &#x27;个人&#x27;, 5, &#x27;重大疾病保障、住院费用报销&#x27;),</span><br><span class="line">(&#x27;家庭综合险&#x27;, 3, 10000, &#x27;家庭&#x27;, 3, &#x27;意外伤害、财产损失保障&#x27;),</span><br><span class="line">(&#x27;老年健康保险&#x27;, 4, 15000, &#x27;老年人&#x27;, 10, &#x27;慢性病费用报销、住院补贴&#x27;),</span><br><span class="line">(&#x27;儿童成长保险&#x27;, 5, 8000, &#x27;儿童&#x27;, 5, &#x27;教育金、意外医疗保障&#x27;),</span><br><span class="line">(&#x27;高端医疗保险&#x27;, 6, 50000, &#x27;个人&#x27;, 3, &#x27;高端医疗服务、海外医疗保障&#x27;),</span><br><span class="line">(&#x27;意外伤害保险&#x27;, 7, 10000, &#x27;个人&#x27;, 1, &#x27;意外医疗、意外身故赔偿&#x27;),</span><br><span class="line">(&#x27;女性专属保险&#x27;, 8, 12000, &#x27;女性&#x27;, 5, &#x27;健康保障、重大疾病保障&#x27;),</span><br><span class="line">(&#x27;留学生保险&#x27;, 9, 15000, &#x27;留学生&#x27;, 2, &#x27;海外医疗、紧急救援服务&#x27;),</span><br><span class="line">(&#x27;企业员工团体险&#x27;, 10, 100000, &#x27;企业员工&#x27;, 1, &#x27;意外伤害、医疗报销&#x27;);</span><br></pre></td></tr></table></figure>

<p><strong>初始化fund表</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO fund (f_name, f_id, f_type, f_amount, risk_level, f_manager) VALUES</span><br><span class="line">(&#x27;稳健收益基金A&#x27;, 1, &#x27;债券型&#x27;, 10000, &#x27;低风险&#x27;, 101),</span><br><span class="line">(&#x27;稳健收益基金B&#x27;, 2, &#x27;债券型&#x27;, 20000, &#x27;低风险&#x27;, 102),</span><br><span class="line">(&#x27;成长型基金A&#x27;, 3, &#x27;股票型&#x27;, 30000, &#x27;中风险&#x27;, 103),</span><br><span class="line">(&#x27;成长型基金B&#x27;, 4, &#x27;股票型&#x27;, 40000, &#x27;中风险&#x27;, 104),</span><br><span class="line">(&#x27;高收益基金A&#x27;, 5, &#x27;混合型&#x27;, 50000, &#x27;高风险&#x27;, 105),</span><br><span class="line">(&#x27;高收益基金B&#x27;, 6, &#x27;混合型&#x27;, 60000, &#x27;高风险&#x27;, 106),</span><br><span class="line">(&#x27;指数基金A&#x27;, 7, &#x27;指数型&#x27;, 25000, &#x27;中风险&#x27;, 107),</span><br><span class="line">(&#x27;指数基金B&#x27;, 8, &#x27;指数型&#x27;, 35000, &#x27;中风险&#x27;, 108),</span><br><span class="line">(&#x27;保本基金A&#x27;, 9, &#x27;保本型&#x27;, 15000, &#x27;低风险&#x27;, 109),</span><br><span class="line">(&#x27;保本基金B&#x27;, 10, &#x27;保本型&#x27;, 18000, &#x27;低风险&#x27;, 110);</span><br></pre></td></tr></table></figure>

<p><strong>初始化property表</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO property (pro_id, pro_c_id, pro_pif_id, pro_type, pro_status, pro_quantity, pro_income, pro_purchase_time) VALUES</span><br><span class="line">(1, 1, 1, 1, &#x27;持有中&#x27;, 10, 5000, &#x27;2024-01-10&#x27;), -- 理财产品，引用 finances_product 表</span><br><span class="line">(2, 2, 2, 1, &#x27;持有中&#x27;, 5, 3000, &#x27;2024-02-15&#x27;), -- 理财产品，引用 finances_product 表</span><br><span class="line">(3, 3, 3, 2, &#x27;已赔付&#x27;, 1, 1500, &#x27;2024-03-20&#x27;), -- 保险，引用 insurance 表</span><br><span class="line">(4, 4, 4, 2, &#x27;保单生效&#x27;, 1, 0, &#x27;2024-04-05&#x27;),  -- 保险，引用 insurance 表</span><br><span class="line">(5, 5, 5, 3, &#x27;已赎回&#x27;, 20, 8000, &#x27;2024-05-10&#x27;), -- 基金，引用 fund 表</span><br><span class="line">(6, 6, 6, 3, &#x27;持有中&#x27;, 10, 7000, &#x27;2024-06-18&#x27;), -- 基金，引用 fund 表</span><br><span class="line">(7, 7, 7, 1, &#x27;持有中&#x27;, 2, 2000, &#x27;2024-07-01&#x27;),  -- 理财产品，引用 finances_product 表</span><br><span class="line">(8, 8, 8, 2, &#x27;保单生效&#x27;, 1, 0, &#x27;2024-08-25&#x27;),  -- 保险，引用 insurance 表</span><br><span class="line">(9, 9, 9, 3, &#x27;已赎回&#x27;, 15, 5000, &#x27;2024-09-12&#x27;), -- 基金，引用 fund 表</span><br><span class="line">(10, 10, 10, 1, &#x27;持有中&#x27;, 5, 2500, &#x27;2024-10-08&#x27;); -- 理财产品，引用 finances_product 表</span><br></pre></td></tr></table></figure>

<p><strong>添加约束</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ALTER table finances_product ADD CONSTRAINT c_p_mount CHECK (p_amount &gt;=0);</span><br><span class="line">ALTER table fund ADD CONSTRAINT c_f_mount CHECK (f_amount &gt;=0);</span><br><span class="line">ALTER table insurance ADD CONSTRAINT c_i_mount CHECK (i_amount &gt;=0);</span><br></pre></td></tr></table></figure>

<p><strong>查询部分</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">select * from bank_card bc ;</span><br><span class="line">select * from property where pro_status = &#x27;持有中&#x27;;</span><br><span class="line">select count(*) from client;</span><br><span class="line">select count(*) from bank_card where b_type = &#x27;储蓄卡&#x27;;</span><br><span class="line">select count(*) from bank_card where b_type = &#x27;信用卡&#x27;;</span><br><span class="line">select avg(i_amount) from insurance;</span><br><span class="line">select i_name,i_amount from insurance where i_amount = (select max(i_amount) from insurance);</span><br><span class="line">select i_name,i_amount from insurance where i_amount = (select min(i_amount) from insurance);</span><br><span class="line">select c_id, c_name, c_id_card from client where exists (select 1 from bank_card where bank_card.b_c_id = client.c_id);</span><br><span class="line">select c_id, c_name, c_id_card from client where not exists (select 1 from bank_card where bank_card.b_c_id = client.c_id and bank_card.b_number like &#x27;622202130202000001%&#x27;);</span><br><span class="line">select i_name,i_person from insurance where i_amount &gt; (select avg(i_amount) from insurance);</span><br><span class="line">select i_id,i_name,i_amount,i_person from insurance where i_id &gt;2 order by i_amount desc;</span><br><span class="line">select p_year,count(*) from  finances_product group by p_year;</span><br><span class="line">select i_person,count(*) from insurance group by i_person having count(*) = 2;</span><br><span class="line">with fundinfo as (select f_id,f_name,f_amount,risk_level from fund)</span><br><span class="line">select * from fundinfo;</span><br></pre></td></tr></table></figure>

<p>md，全是截图，截得快吐了</p>
<p><strong>视图部分</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">create view v_client as select c.c_id,c.c_name,c.c_id_card from &quot;client&quot; c </span><br><span class="line">where exists (select 1 from bank_card b where b.b_c_id = c.c_id);</span><br><span class="line">select * from v_client;</span><br><span class="line">create or replace view  v_client as select c.c_id,c.c_name,c.c_id_card from &quot;client&quot; c join bank_card b on</span><br><span class="line">b.b_c_id = c.c_id where b.b_type=&#x27;信用卡&#x27;;</span><br><span class="line">select * from v_client;</span><br><span class="line">alter view v_client rename to v_client_next;</span><br><span class="line">select * from v_client_next;</span><br><span class="line">drop view v_client_next;</span><br><span class="line">select * from v_client_next vcn ;</span><br></pre></td></tr></table></figure>

<p><strong>索引部分</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> index idx_property_pro_c_id <span class="keyword">on</span> property(pro_c_id);</span><br><span class="line">reindex index idx_property_pro_c_id;</span><br><span class="line"><span class="keyword">alter</span> index idx_property_pro_c_id rename <span class="keyword">to</span> idx_property_temp;</span><br><span class="line"><span class="keyword">drop</span> index idx_property_temp;</span><br></pre></td></tr></table></figure>

<p><strong>更新与删除部分</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> bank_card <span class="keyword">set</span> b_type <span class="operator">=</span> <span class="string">&#x27;借记卡&#x27;</span> <span class="keyword">from</span> &quot;client&quot; <span class="keyword">where</span> bank_card.b_c_id <span class="operator">=</span> &quot;client&quot;.c_id <span class="keyword">and</span> bank_card.b_c_id <span class="operator">&lt;</span><span class="number">10</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> fund <span class="keyword">where</span> f_id<span class="operator">&lt;</span><span class="number">3</span></span><br></pre></td></tr></table></figure>

<h3 id="3、openGauss自选题应用实验"><a href="#3、openGauss自选题应用实验" class="headerlink" title="3、openGauss自选题应用实验"></a>3、openGauss自选题应用实验</h3><p>选题：题库系统</p>
<p><strong>构建数据库</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">create database examsystem;</span><br><span class="line">create schema exam;</span><br></pre></td></tr></table></figure>

<p><strong>构建基本表</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># 构建用户表</span><br><span class="line">create table users (</span><br><span class="line">    user_id serial primary key,                    -- 用户ID, 自动递增</span><br><span class="line">    username varchar(100) not null,                -- 用户名</span><br><span class="line">    password varchar(255) not null,                -- 用户密码，存储加密后的密码</span><br><span class="line">    email varchar(255),                            -- 用户邮箱</span><br><span class="line">    role varchar(20) not null,                     -- 用户角色，使用 varchar 类型</span><br><span class="line">    created_at timestamp default current_timestamp, -- 用户创建时间</span><br><span class="line">    updated_at timestamp default current_timestamp, -- 用户更新时间</span><br><span class="line">    check (role in (&#x27;student&#x27;, &#x27;teacher&#x27;, &#x27;admin&#x27;)) -- 使用 check 约束限制角色值</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 添加注释</span><br><span class="line">comment on column users.user_id is &#x27;用户唯一标识符，自动递增&#x27;;</span><br><span class="line">comment on column users.username is &#x27;用户登录名，必须唯一&#x27;;</span><br><span class="line">comment on column users.password is &#x27;用户密码，存储加密后的密码&#x27;;</span><br><span class="line">comment on column users.email is &#x27;用户的电子邮件地址&#x27;;</span><br><span class="line">comment on column users.role is &#x27;用户角色，值为 student、teacher 或 admin&#x27;;</span><br><span class="line">comment on column users.created_at is &#x27;记录创建时间，默认当前时间&#x27;;</span><br><span class="line">comment on column users.updated_at is &#x27;记录最后更新时间，默认当前时间&#x27;;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"># 构建题目表</span><br><span class="line">create table questions (</span><br><span class="line">    question_id serial primary key,               -- 题目ID, 自动递增</span><br><span class="line">    content text not null,                        -- 题目内容</span><br><span class="line">    type varchar(20) not null,                    -- 题目类型</span><br><span class="line">    difficulty int not null,                      -- 难度等级 (1-5)</span><br><span class="line">    category_id int,                              -- 分类ID (外键)</span><br><span class="line">    created_at timestamp default current_timestamp, -- 创建时间</span><br><span class="line">    updated_at timestamp default current_timestamp, -- 更新时间</span><br><span class="line">    check (type in (&#x27;single&#x27;, &#x27;multiple&#x27;, &#x27;fill&#x27;, &#x27;true_false&#x27;)), -- 题目类型约束</span><br><span class="line">    check (difficulty between 1 and 5)            -- 难度等级约束 (1-5)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 添加注释</span><br><span class="line">comment on column questions.question_id is &#x27;题目唯一标识符，自动递增&#x27;;</span><br><span class="line">comment on column questions.content is &#x27;题目的内容&#x27;;</span><br><span class="line">comment on column questions.type is &#x27;题目类型，值为 single, multiple, fill 或 true_false&#x27;;</span><br><span class="line">comment on column questions.difficulty is &#x27;题目的难度等级，范围为 1 到 5&#x27;;</span><br><span class="line">comment on column questions.category_id is &#x27;题目所属的分类ID&#x27;;</span><br><span class="line">comment on column questions.created_at is &#x27;题目创建时间，默认当前时间&#x27;;</span><br><span class="line">comment on column questions.updated_at is &#x27;题目更新时间，默认当前时间&#x27;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># 构建选项表</span><br><span class="line">create table options (</span><br><span class="line">    option_id serial primary key,                -- 选项ID, 自动递增</span><br><span class="line">    question_id int not null,                     -- 题目ID (外键)</span><br><span class="line">    content varchar(255) not null,                -- 选项内容</span><br><span class="line">    is_correct boolean not null,                  -- 是否为正确选项</span><br><span class="line">    foreign key (question_id) references questions(question_id) on delete cascade -- 外键约束</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 添加注释</span><br><span class="line">comment on column options.option_id is &#x27;选项唯一标识符，自动递增&#x27;;</span><br><span class="line">comment on column options.question_id is &#x27;关联的题目ID&#x27;;</span><br><span class="line">comment on column options.content is &#x27;选项的内容&#x27;;</span><br><span class="line">comment on column options.is_correct is &#x27;选项是否为正确答案&#x27;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># 构建题目分类表</span><br><span class="line">create table categories (</span><br><span class="line">    category_id serial primary key,              -- 分类ID, 自动递增</span><br><span class="line">    name varchar(100) not null,                   -- 分类名称</span><br><span class="line">    description text                              -- 分类描述</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 添加注释</span><br><span class="line">comment on column categories.category_id is &#x27;分类唯一标识符，自动递增&#x27;;</span><br><span class="line">comment on column categories.name is &#x27;分类名称&#x27;;</span><br><span class="line">comment on column categories.description is &#x27;分类描述&#x27;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># 构建答案表</span><br><span class="line">create table answers (</span><br><span class="line">    answer_id serial primary key,                 -- 答案ID, 自动递增</span><br><span class="line">    user_id int not null,                         -- 用户ID (外键)</span><br><span class="line">    question_id int not null,                     -- 题目ID (外键)</span><br><span class="line">    answer text not null,                         -- 用户的答案内容</span><br><span class="line">    is_correct boolean,                           -- 用户的答案是否正确</span><br><span class="line">    submitted_at timestamp default current_timestamp, -- 提交时间</span><br><span class="line">    foreign key (user_id) references users(user_id) on delete cascade, -- 外键约束</span><br><span class="line">    foreign key (question_id) references questions(question_id) on delete cascade -- 外键约束</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 添加注释</span><br><span class="line">comment on column answers.answer_id is &#x27;答案唯一标识符，自动递增&#x27;;</span><br><span class="line">comment on column answers.user_id is &#x27;提交答案的用户ID&#x27;;</span><br><span class="line">comment on column answers.question_id is &#x27;关联的题目ID&#x27;;</span><br><span class="line">comment on column answers.answer is &#x27;用户的答案内容&#x27;;</span><br><span class="line">comment on column answers.is_correct is &#x27;用户答案是否正确&#x27;;</span><br><span class="line">comment on column answers.submitted_at is &#x27;答案提交时间，默认当前时间&#x27;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># 构建考试表</span><br><span class="line">create table exams (</span><br><span class="line">    exam_id serial primary key,                   -- 考试ID, 自动递增</span><br><span class="line">    name varchar(255) not null,                    -- 考试名称</span><br><span class="line">    start_time timestamp not null,                 -- 考试开始时间</span><br><span class="line">    end_time timestamp not null,                   -- 考试结束时间</span><br><span class="line">    duration int not null,                         -- 考试时长（分钟）</span><br><span class="line">    created_at timestamp default current_timestamp -- 创建时间</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 添加注释</span><br><span class="line">comment on column exams.exam_id is &#x27;考试唯一标识符，自动递增&#x27;;</span><br><span class="line">comment on column exams.name is &#x27;考试名称&#x27;;</span><br><span class="line">comment on column exams.start_time is &#x27;考试开始时间&#x27;;</span><br><span class="line">comment on column exams.end_time is &#x27;考试结束时间&#x27;;</span><br><span class="line">comment on column exams.duration is &#x27;考试时长，单位为分钟&#x27;;</span><br><span class="line">comment on column exams.created_at is &#x27;考试创建时间，默认当前时间&#x27;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># 构建考试关联表</span><br><span class="line">create table exam_questions (</span><br><span class="line">    exam_id int not null,                         -- 考试ID (外键)</span><br><span class="line">    question_id int not null,                     -- 题目ID (外键)</span><br><span class="line">    question_order int not null,                  -- 题目在考试中的顺序</span><br><span class="line">    primary key (exam_id, question_id),           -- 联合主键</span><br><span class="line">    foreign key (exam_id) references exams(exam_id) on delete cascade, -- 外键约束</span><br><span class="line">    foreign key (question_id) references questions(question_id) on delete cascade -- 外键约束</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 添加注释</span><br><span class="line">comment on column exam_questions.exam_id is &#x27;关联的考试ID&#x27;;</span><br><span class="line">comment on column exam_questions.question_id is &#x27;关联的题目ID&#x27;;</span><br><span class="line">comment on column exam_questions.question_order is &#x27;题目在考试中的顺序&#x27;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># 构建成绩表</span><br><span class="line">create table scores (</span><br><span class="line">    score_id serial primary key,                  -- 成绩ID, 自动递增</span><br><span class="line">    user_id int not null,                         -- 用户ID (外键)</span><br><span class="line">    exam_id int not null,                         -- 考试ID (外键)</span><br><span class="line">    score decimal(5,2) not null,                  -- 得分</span><br><span class="line">    total_score decimal(5,2) not null,            -- 总分</span><br><span class="line">    created_at timestamp default current_timestamp, -- 记录时间</span><br><span class="line">    foreign key (user_id) references users(user_id) on delete cascade,  -- 外键约束</span><br><span class="line">    foreign key (exam_id) references exams(exam_id) on delete cascade -- 外键约束</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 添加注释</span><br><span class="line">comment on column scores.score_id is &#x27;成绩唯一标识符，自动递增&#x27;;</span><br><span class="line">comment on column scores.user_id is &#x27;用户ID&#x27;;</span><br><span class="line">comment on column scores.exam_id is &#x27;考试ID&#x27;;</span><br><span class="line">comment on column scores.score is &#x27;用户在考试中的得分&#x27;;</span><br><span class="line">comment on column scores.total_score is &#x27;考试的总分&#x27;;</span><br><span class="line">comment on column scores.created_at is &#x27;成绩记录时间，默认当前时间&#x27;;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># 日志表</span><br><span class="line">create table logs (</span><br><span class="line">    log_id serial primary key,                    -- 日志ID, 自动递增</span><br><span class="line">    user_id int not null,                         -- 用户ID (外键)</span><br><span class="line">    action varchar(255) not null,                 -- 操作类型（如登录、提交考试等）</span><br><span class="line">    description text,                             -- 操作描述</span><br><span class="line">    created_at timestamp default current_timestamp, -- 操作时间</span><br><span class="line">    foreign key (user_id) references users(user_id) on delete cascade -- 外键约束</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 添加注释</span><br><span class="line">comment on column logs.log_id is &#x27;日志唯一标识符，自动递增&#x27;;</span><br><span class="line">comment on column logs.user_id is &#x27;执行操作的用户ID&#x27;;</span><br><span class="line">comment on column logs.action is &#x27;操作类型（如登录、提交考试等）&#x27;;</span><br><span class="line">comment on column logs.description is &#x27;操作的详细描述&#x27;;</span><br><span class="line">comment on column logs.created_at is &#x27;操作时间，默认当前时间&#x27;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 为题目表添加外键</span><br><span class="line">alter table questions add constraint fk_category foreign key (category_id) references categories(category_id) on delete set null;</span><br></pre></td></tr></table></figure>

<p><strong>插入数据部分</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用faker库生成随机数据的sql</span></span><br><span class="line"><span class="keyword">from</span> faker <span class="keyword">import</span> Faker</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"><span class="comment"># 初始化 Faker</span></span><br><span class="line">fake = Faker()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义角色列表</span></span><br><span class="line">roles = [<span class="string">&#x27;student&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 打开文件写入生成的 SQL（可选）</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;insert_users.sql&quot;</span>, <span class="string">&quot;w&quot;</span>) <span class="keyword">as</span> file:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;-- Insert users into the users table&quot;</span>, file=file)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 生成 10 个用户</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">11</span>):</span><br><span class="line">        username = <span class="string">f&quot;user<span class="subst">&#123;i&#125;</span>&quot;</span>  <span class="comment"># 用户名格式</span></span><br><span class="line">        password = fake.password(length=<span class="number">10</span>)  <span class="comment"># 随机生成密码</span></span><br><span class="line">        email = fake.email()  <span class="comment"># 随机生成邮箱</span></span><br><span class="line">        role = random.choice(roles)  <span class="comment"># 随机分配角色</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 生成插入语句</span></span><br><span class="line">        insert_statement = <span class="string">f&quot;&quot;&quot;insert into users (username, password, email, role) values (&#x27;<span class="subst">&#123;username&#125;</span>&#x27;, &#x27;<span class="subst">&#123;password&#125;</span>&#x27;, &#x27;<span class="subst">&#123;email&#125;</span>&#x27;, &#x27;<span class="subst">&#123;role&#125;</span>&#x27;);&quot;&quot;&quot;</span></span><br><span class="line">        <span class="built_in">print</span>(insert_statement, file=file)</span><br><span class="line">        <span class="built_in">print</span>(insert_statement)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># 随机生成十个用户插入用户表</span><br><span class="line">insert into users (username, password, email, role) values (&#x27;user1&#x27;, &#x27;tW4B$^dM^4&#x27;, &#x27;kbeltran@example.net&#x27;, &#x27;student&#x27;);</span><br><span class="line">insert into users (username, password, email, role) values (&#x27;user2&#x27;, &#x27;_4OL9PUsm8&#x27;, &#x27;gonzalezsarah@example.org&#x27;, &#x27;student&#x27;);</span><br><span class="line">insert into users (username, password, email, role) values (&#x27;user3&#x27;, &#x27;DS59L#Bh6^&#x27;, &#x27;sgarcia@example.com&#x27;, &#x27;student&#x27;);</span><br><span class="line">insert into users (username, password, email, role) values (&#x27;user4&#x27;, &#x27;Y*dzVcyN#7&#x27;, &#x27;morganbraun@example.com&#x27;, &#x27;student&#x27;);</span><br><span class="line">insert into users (username, password, email, role) values (&#x27;user5&#x27;, &#x27;E#8YQGcn@F&#x27;, &#x27;eric85@example.com&#x27;, &#x27;student&#x27;);</span><br><span class="line">insert into users (username, password, email, role) values (&#x27;user6&#x27;, &#x27;78UXW1_Y*g&#x27;, &#x27;snyderelizabeth@example.org&#x27;, &#x27;student&#x27;);</span><br><span class="line">insert into users (username, password, email, role) values (&#x27;user7&#x27;, &#x27;(7Jrps@!C2&#x27;, &#x27;brenda32@example.com&#x27;, &#x27;student&#x27;);</span><br><span class="line">insert into users (username, password, email, role) values (&#x27;user8&#x27;, &#x27;6f)RmRu7&amp;L&#x27;, &#x27;robertwiley@example.com&#x27;, &#x27;student&#x27;);</span><br><span class="line">insert into users (username, password, email, role) values (&#x27;user9&#x27;, &#x27;Bv1HXw2Dj@&#x27;, &#x27;rwalter@example.org&#x27;, &#x27;student&#x27;);</span><br><span class="line">insert into users (username, password, email, role) values (&#x27;user10&#x27;, &#x27;Y7fKMBDp(1&#x27;, &#x27;timothy67@example.net&#x27;, &#x27;student&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 随机生成十个分类插入题目分类表</span><br><span class="line">insert into categories (name, description) values</span><br><span class="line">(&#x27;数学&#x27;, &#x27;涉及基础代数、几何、概率与统计等内容的数学题目&#x27;),</span><br><span class="line">(&#x27;物理&#x27;, &#x27;涵盖经典力学、电磁学、光学、热力学等物理领域的题目&#x27;),</span><br><span class="line">(&#x27;化学&#x27;, &#x27;包含无机化学、有机化学以及物质结构等内容的题目&#x27;),</span><br><span class="line">(&#x27;生物&#x27;, &#x27;涉及细胞生物学、遗传学和生态学等生物学领域&#x27;),</span><br><span class="line">(&#x27;计算机科学&#x27;, &#x27;覆盖编程、数据结构、算法及计算机理论的题目&#x27;),</span><br><span class="line">(&#x27;历史&#x27;, &#x27;包括世界历史、中国历史和重大历史事件分析&#x27;),</span><br><span class="line">(&#x27;地理&#x27;, &#x27;涵盖自然地理、人文地理及地球科学相关内容&#x27;),</span><br><span class="line">(&#x27;文学&#x27;, &#x27;涉及中外文学作品、文学史及文学体裁分析&#x27;),</span><br><span class="line">(&#x27;外语&#x27;, &#x27;包含英语、法语等外语阅读、语法与写作的题目&#x27;),</span><br><span class="line">(&#x27;通识教育&#x27;, &#x27;泛指综合性、跨学科的知识题目，用于扩展视野&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"># 随机生成一百个题目（但是毫无实际意义）</span><br><span class="line">from faker import Faker</span><br><span class="line">import random</span><br><span class="line"></span><br><span class="line"># 初始化 Faker</span><br><span class="line">fake = Faker()</span><br><span class="line"></span><br><span class="line"># 定义题目类型和难度范围</span><br><span class="line">question_types = [&#x27;single&#x27;, &#x27;multiple&#x27;, &#x27;fill&#x27;, &#x27;true_false&#x27;]</span><br><span class="line">difficulty_levels = [1, 2, 3, 4, 5]</span><br><span class="line">category_ids = list(range(1, 11))  # 假设分类表中有 10 个分类，ID 范围是 1-10</span><br><span class="line"></span><br><span class="line"># 打开文件写入生成的 SQL（可选）</span><br><span class="line">with open(&quot;insert_questions.sql&quot;, &quot;w&quot;) as file:</span><br><span class="line">    print(&quot;-- Insert questions into the questions table&quot;, file=file)</span><br><span class="line"></span><br><span class="line">    # 生成 100 个问题</span><br><span class="line">    for i in range(1, 101):</span><br><span class="line">        content = fake.sentence(nb_words=10)  # 随机生成 10 个单词组成的问题内容</span><br><span class="line">        question_type = random.choice(question_types)  # 随机选择题目类型</span><br><span class="line">        difficulty = random.choice(difficulty_levels)  # 随机选择难度等级</span><br><span class="line">        category_id = random.choice(category_ids)  # 随机选择分类 ID</span><br><span class="line"></span><br><span class="line">        # 生成插入语句</span><br><span class="line">        insert_statement = f&quot;&quot;&quot;insert into questions (content, type, difficulty, category_id) values (&#x27;&#123;content&#125;&#x27;, &#x27;&#123;question_type&#125;&#x27;, &#123;difficulty&#125;, &#123;category_id&#125;);&quot;&quot;&quot;</span><br><span class="line">        print(insert_statement, file=file)</span><br><span class="line">        print(insert_statement)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>查询部分</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># 单表查询</span><br><span class="line">select * from users;</span><br><span class="line">select username,email from users;</span><br><span class="line">select * from users where role = &#x27;student&#x27;;</span><br><span class="line">select username,length(username) as len from users;</span><br><span class="line">select * from users where role in (&#x27;teacher&#x27;,&#x27;admin&#x27;);</span><br><span class="line">select * from users where username like &#x27;user%&#x27;;</span><br><span class="line">select * from users order by email asc;</span><br><span class="line">select count(*) as count from users;</span><br><span class="line">select role,count(*) as rolecount from users group by role;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># 多表查询</span><br><span class="line">select q.content, c.name as category_name from questions q join categories c on q.category_id = c.category_id;</span><br><span class="line">select q.content, c.name as category_name, u.username from questions q join categories c </span><br><span class="line">on q.category_id = c.category_id join users u on q.category_id = u.user_id;</span><br><span class="line">select c1.name as category1, c2.name as category2, c1.description from categories c1 join categories c2 </span><br><span class="line">on c1.description = c2.description and c1.category_id &lt;&gt; c2.category_id;</span><br><span class="line">select c.name as category_name, q.content as question_content from categories c left join questions q </span><br><span class="line">on c.category_id = q.category_id;</span><br><span class="line">select username, (select count(*) from users) as total_users from users;</span><br><span class="line">select name from categories c where exists (select 1 from questions q where q.category_id = c.category_id);</span><br><span class="line">select username from users u where exists (select 1 from questions q where q.category_id = u.user_id);</span><br><span class="line">select d.category_name, d.question_count from </span><br><span class="line">(select c.name as category_name, count(q.content) as question_count </span><br><span class="line">from categories c left join questions q on c.category_id = q.category_id group by c.name)</span><br><span class="line">d order by d.question_count desc;	</span><br></pre></td></tr></table></figure>

<p><strong>视图部分</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 创建视图</span><br><span class="line">create view student_users as select username, email, role from users where role = &#x27;student&#x27;;</span><br><span class="line">create view student_user_emails as select username, email from student_users;</span><br><span class="line">select username from student_user_emails order by username asc;</span><br></pre></td></tr></table></figure>

<p><strong>触发器部分</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># 创建触发器函数</span><br><span class="line">create or replace function log_user_login()</span><br><span class="line">returns trigger as $$</span><br><span class="line">begin</span><br><span class="line">    insert into logs (user_id, action, created_at, description)</span><br><span class="line">    values (new.user_id, &#x27;login&#x27;, current_timestamp, null);</span><br><span class="line">    return new;</span><br><span class="line">end;</span><br><span class="line">$$ language plpgsql;</span><br><span class="line"># 创建触发器</span><br><span class="line">create trigger user_login</span><br><span class="line">after update on users</span><br><span class="line">for each row</span><br><span class="line">when (new.updated_at is distinct from old.updated_at)</span><br><span class="line">execute procedure log_user_login();</span><br><span class="line"># 触发触发器</span><br><span class="line">update users</span><br><span class="line">set updated_at = current_timestamp</span><br><span class="line">where role = &#x27;admin&#x27;;</span><br></pre></td></tr></table></figure>

<p>注意opengauss创建触发器使用的是procedure而不是function</p>
<p><strong>新建用户并给予权限</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">create user teacher with password &#x27;teacher_password&#x27;;</span><br><span class="line">grant insert, update, delete on table questions to teacher;</span><br></pre></td></tr></table></figure>

<h3 id="4、华为-openGauss-数据库性能检查实验"><a href="#4、华为-openGauss-数据库性能检查实验" class="headerlink" title="4、华为 openGauss 数据库性能检查实验"></a>4、华为 openGauss 数据库性能检查实验</h3><p>由于镜像安装的openguass里面没有这个工具，虽然是企业版的，所以使用了pg_top+pgbench结合的方式来实现对数据库的性能检查</p>
<p>这两个工具都可以通过apt下载</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 先用pg_top连接 </span><br><span class="line">pg_top -h 127.0.0.1 -p 5432 -U gaussdb -d pgbenchtest -W -s 2</span><br><span class="line"># 先创建数据库（这个就不写，是提前创建好的），然后用pgbench生成测试数据</span><br><span class="line">pgbench -i -s 10 -h 127.0.0.1 -p 5432 -U gaussdb pgbenchtest</span><br><span class="line"># 开测！</span><br><span class="line">pgbench -c 20 -j 5 -T 60 -h 127.0.0.1 -p 5432 -U gaussdb pgbenchtest</span><br><span class="line"># 观察pg_top的变化，并且pgbench会有报告生成</span><br></pre></td></tr></table></figure>

<h3 id="5、使用JDBC连接openGauss数据库"><a href="#5、使用JDBC连接openGauss数据库" class="headerlink" title="5、使用JDBC连接openGauss数据库"></a>5、使用JDBC连接openGauss数据库</h3><p><a target="_blank" rel="noopener" href="https://opengauss.obs.cn-south-1.myhuaweicloud.com/1.0.0/arm/openGauss-1.0.0-JDBC.tar.gz">https://opengauss.obs.cn-south-1.myhuaweicloud.com/1.0.0/arm/openGauss-1.0.0-JDBC.tar.gz</a></p>
<p>下载上面的驱动，然后用maven生成模板，添加依赖即可</p>
<p>复制下面的代码到maven的Main.java文件中，修改数据库配置即可成功连接</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"># Main.java</span><br><span class="line">package org.example;</span><br><span class="line"></span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.ResultSet;</span><br><span class="line">import java.sql.Statement;</span><br><span class="line"></span><br><span class="line">public class Main &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        // 数据库连接信息</span><br><span class="line">        String url = &quot;jdbc:postgresql://192.168.92.188:5432/finance&quot;;</span><br><span class="line">        String user = &quot;gaussdb&quot;;</span><br><span class="line">        String password = &quot;Opengauss123!&quot;;</span><br><span class="line"></span><br><span class="line">        // 加载驱动程序并建立连接</span><br><span class="line">        try &#123;</span><br><span class="line">            Class.forName(&quot;org.postgresql.Driver&quot;); // OpenGauss 使用 PostgreSQL 的 JDBC 驱动</span><br><span class="line">            Connection connection = DriverManager.getConnection(url, user, password);</span><br><span class="line">            System.out.println(&quot;连接成功！&quot;);</span><br><span class="line"></span><br><span class="line">            // 执行查询</span><br><span class="line">            String query = &quot;SELECT version();&quot;; // 查询数据库版本</span><br><span class="line">            Statement stmt = connection.createStatement();</span><br><span class="line">            ResultSet rs = stmt.executeQuery(query);</span><br><span class="line"></span><br><span class="line">            // 输出查询结果</span><br><span class="line">            while (rs.next()) &#123;</span><br><span class="line">                System.out.println(&quot;数据库版本: &quot; + rs.getString(1));</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            // 关闭资源</span><br><span class="line">            rs.close();</span><br><span class="line">            stmt.close();</span><br><span class="line">            connection.close();</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="数据库课程考察与课程设计"><a href="#数据库课程考察与课程设计" class="headerlink" title="数据库课程考察与课程设计"></a>数据库课程考察与课程设计</h2><p>由于课程考察和课程设计并不冲突，所以打算在一个项目中同时实现，课程考察是使用非关系型数据库，课程设计是使用关系型数据库</p>
<p>所以课程考察可以使用redis，然后课程设计使用opengauss（懒得配环境是这样的，而且可以重复利用之前用过的数据</p>
<p>后面用了mysql，因为opengauss没有python的兼容</p>
<p>开发顺序：先开发前后端界面再开发数据库，然后连接数据库将数据库中的内容输出到前端。</p>
<h3 id="1、开发前后端界面"><a href="#1、开发前后端界面" class="headerlink" title="1、开发前后端界面"></a>1、开发前后端界面</h3><p>由于只是个课设，所以没有前后端分离的打算，那样比较麻烦，所以打算使用python的flask+jinja2来同时实现前后端，即使用后端渲染html出前端，然后使用js实现交互，这样只需要单独对页面进行制作即可，感觉上不会太麻烦。</p>
<p>但是貌似还是前后端分离了（</p>
<p>前端可以直接用bootstrap的模板，这样就不用自己设置样式了。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">技术栈</span><br><span class="line">后端:flask+jinja2</span><br><span class="line">前端:html+css+js+bootstrap</span><br></pre></td></tr></table></figure>

<h3 id="2、连接数据库"><a href="#2、连接数据库" class="headerlink" title="2、连接数据库"></a>2、连接数据库</h3><p>后端的话，由于要使用非关系型数据库和关系型数据库，所以需要将数据分开存储，但是两个数据库之间又会有交互。</p>
<p>本来是打算用信息队列的，但是感觉如果数据量不是很大的话使用flask直接调用api进行交互也可以，所以先尝试一下flask</p>
<p>将关系性比较强的用户，题目信息等数据存储到关系型数据库中<br>将关系性比较弱的题目内容等数据存储到非关系型数据库中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">技术栈：</span><br><span class="line">非关系型数据库:redis</span><br><span class="line">关系型数据库:opengauss/psql（雾，是mysql</span><br></pre></td></tr></table></figure>

<h3 id="3、明确功能"><a href="#3、明确功能" class="headerlink" title="3、明确功能"></a>3、明确功能</h3><p>题库系统的身份有学生、教师和管理员三种。</p>
<p>根据初步规划，首先需要一个index页面，index页面需要一个跳转到register和login的页面，但是register只能注册学生，教师需要通过管理员才能注册，但是所有用户都是共用一个login页面（很显然是因为我懒得多写一个admin_login页面）。</p>
<p>以上是login部分，login成功之后显然需要一个logout页面，logout之后会直接跳转到index，然后清除登录痕迹，应该是用flask_session实现，还没想好，可能还需要cookie来实现登录持久化。</p>
<p>如果登录失败的话仍然跳转到register，但是清空表单的内容</p>
<p>学生用户登录成功的话可以跳转到student页面，会显示考试的科目，分为考试完成或者未完成的科目，考试完成的不能再次考试并且会显示成绩。点击完成的考试会弹出提示显示已完成，点击未完成的考试则弹出是否开始考试的弹窗，点击开始考试之后跳转到exam页面，exam页面会显示考题，由于懒得对学生是否进行了考试作出检验，此处如果直接点击提交试卷就会结束考试，跳转回student页面，然后显示成绩（我真是好人吧，直接显示成绩）。</p>
<p>教师用户登录成功之后跳转到teacher页面，在该页面也会显示课程，但是只会显示与该教师绑定的课程，一个教师可以绑定多个教师，通过管理员可以进行设置。在教师页面可以通过点击课程标签进入question的dashboard，通过dashboard的表单可以对该科目的题库进行增删改查。</p>
<p>管理员用户登录成功之后可以跳转到admin页面，在该页面会显示用户和题库两个标签，点击进入user或者question的dashboard，可以对整个数据库进行修改。</p>
<p>总结一下，需要开发的路由有index、register、login、logout、student、teacher、admin、user、question，一共是9个。</p>
<h3 id="4、前后端开发"><a href="#4、前后端开发" class="headerlink" title="4、前后端开发"></a>4、前后端开发</h3><p>由于写css是一件非常痛苦的事情，所以这里使用bootstrap来解放双手。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">从https://getbootstrap.com下载编译好的css和js文件，然后解压，将js和css目录存放到project目录下的static目录中</span><br></pre></td></tr></table></figure>

<p><img src="/2024/12/19/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%9E%E9%AA%8C-%E8%AF%BE%E8%AE%BE/image-20241226210510255.png" alt="image-20241226210510255"></p>
<p>目录结构如上，通过flask对路由进行管理，然后使用jinja2对templates进行渲染。</p>
<p>admin_routes显示admin页面</p>
<p>auth_routes用于注册、登录和登出</p>
<p>exam_routes显示考试页面</p>
<p>index_routes用于处理首页、无效路由和角色跳转</p>
<p>question_routes用于处理question相关的数据</p>
<p>student_routes显示student主页</p>
<p>subject_routes用于处理subject相关的数据</p>
<p>teacher_routes显示teacher主页</p>
<h3 id="5、数据库结构"><a href="#5、数据库结构" class="headerlink" title="5、数据库结构"></a>5、数据库结构</h3><p>examsystem需要的数据表</p>
<p>表users，包含id、username、password、email、role、created_time、updated_time、ip</p>
<p>表question，包含id、title、description、type、difficulty、subject_id、creator_id、created_time、updated_time</p>
<p>表subject，包含id、name、created_time、updated_time、exam_duration</p>
<p>表usersubject，包含user_id、subject_id，exam_done（用于表示科目和用户之间的关系，也可以表示考试是否完成）</p>
<p>表answers，包含id、questiond_id、answer_text、created_time、updated_time</p>
<p>表choices，包含id、question_id、content、is_correct、created_time、updated_time（用于选择题）</p>
<p>表exam_records，包含id、user_id、subject_id、score、start_time、end_time、created_time</p>
<p>表exam_questions，包含id、exam_record_id、question_id、user_answer、is_correct、created_time</p>
<p>表logs，包含id、user_id、action、log_type、details、created_time</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">用户表存储系统用户的信息，如管理员、教师、学生等。</span><br><span class="line">题目表存储题目的基础信息。</span><br><span class="line">科目表管理题目的分类。</span><br><span class="line">用户科目表管理用户和科目的联系，表示考试是否完成</span><br><span class="line">答案表存储题目的正确答案或标准答案。</span><br><span class="line">选项表用于选择题的选项信息。</span><br><span class="line">考试记录表记录用户的考试信息。</span><br><span class="line">考试题目表记录每次考试的题目与用户的作答信息。</span><br><span class="line">日志表记录系统操作日志，包括用户行为和系统异常等。</span><br><span class="line">还需要添加索引、约束和级联删除，这里不作赘述，可以看mysql开发部分的模型源码</span><br></pre></td></tr></table></figure>

<p>由于需要同时使用两种不同类型的数据库，所以使用关系型数据库存储数据，然后使用非数据型数据库存储缓存即可。</p>
<h3 id="6、mysql开发"><a href="#6、mysql开发" class="headerlink" title="6、mysql开发"></a>6、mysql开发</h3><p>使用SQLAlchemy定义模型</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> db</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime, timedelta</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">User</span>(db.Model):</span><br><span class="line">    __tablename__ = <span class="string">&quot;users&quot;</span></span><br><span class="line">    <span class="built_in">id</span> = db.Column(db.Integer, primary_key=<span class="literal">True</span>)</span><br><span class="line">    username = db.Column(db.String(<span class="number">255</span>), unique=<span class="literal">True</span>, nullable=<span class="literal">False</span>)</span><br><span class="line">    password = db.Column(db.String(<span class="number">255</span>), nullable=<span class="literal">False</span>)</span><br><span class="line">    email = db.Column(db.String(<span class="number">255</span>), unique=<span class="literal">True</span>)</span><br><span class="line">    role = db.Column(db.String(<span class="number">50</span>), nullable=<span class="literal">False</span>)</span><br><span class="line">    ip = db.Column(db.String(<span class="number">45</span>), nullable=<span class="literal">True</span>)</span><br><span class="line">    created_time = db.Column(db.DateTime, default=datetime.utcnow() + timedelta(hours=<span class="number">8</span>))</span><br><span class="line">    updated_time = db.Column(db.DateTime, default=datetime.utcnow() + timedelta(hours=<span class="number">8</span>), onupdate=datetime.utcnow() + timedelta(hours=<span class="number">8</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 添加关系属性，用于删除用户时级联删除用户关联的科目</span></span><br><span class="line">    user_usersubjects = db.relationship(<span class="string">&#x27;UserSubject&#x27;</span>, backref=<span class="string">&#x27;user&#x27;</span>, cascade=<span class="string">&#x27;all, delete-orphan&#x27;</span>)</span><br><span class="line">    user_examrecords = db.relationship(<span class="string">&#x27;ExamRecord&#x27;</span>, backref=<span class="string">&#x27;user&#x27;</span>, cascade=<span class="string">&#x27;all, delete-orphan&#x27;</span>)</span><br><span class="line">    user_questions = db.relationship(<span class="string">&#x27;Question&#x27;</span>, backref=<span class="string">&#x27;user&#x27;</span>, cascade=<span class="string">&#x27;all, delete-orphan&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Question</span>(db.Model):</span><br><span class="line">    __tablename__ = <span class="string">&quot;questions&quot;</span></span><br><span class="line">    <span class="built_in">id</span> = db.Column(db.Integer, primary_key=<span class="literal">True</span>)</span><br><span class="line">    title = db.Column(db.String(<span class="number">255</span>), nullable=<span class="literal">False</span>, unique=<span class="literal">True</span>)</span><br><span class="line">    description = db.Column(db.Text, nullable=<span class="literal">False</span>)</span><br><span class="line">    <span class="built_in">type</span> = db.Column(db.String(<span class="number">50</span>), nullable=<span class="literal">False</span>)</span><br><span class="line">    difficulty = db.Column(db.String(<span class="number">50</span>), nullable=<span class="literal">False</span>)</span><br><span class="line">    subject_id = db.Column(db.Integer, db.ForeignKey(<span class="string">&quot;subjects.id&quot;</span>), nullable=<span class="literal">False</span>)</span><br><span class="line">    creator_id = db.Column(db.Integer, db.ForeignKey(<span class="string">&quot;users.id&quot;</span>),nullable=<span class="literal">False</span>)</span><br><span class="line">    created_time = db.Column(db.DateTime, default=datetime.utcnow() + timedelta(hours=<span class="number">8</span>))</span><br><span class="line">    updated_time = db.Column(db.DateTime, default=datetime.utcnow() + timedelta(hours=<span class="number">8</span>), onupdate=datetime.utcnow() + timedelta(hours=<span class="number">8</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 添加关系属性，用于删除问题时级联删除问题关联的选项和答案</span></span><br><span class="line">    questions_choices = db.relationship(<span class="string">&#x27;Choice&#x27;</span>, backref=<span class="string">&#x27;question&#x27;</span>, cascade=<span class="string">&#x27;all, delete-orphan&#x27;</span>)</span><br><span class="line">    questions_answers = db.relationship(<span class="string">&#x27;Answer&#x27;</span>, backref=<span class="string">&#x27;question&#x27;</span>, cascade=<span class="string">&#x27;all, delete-orphan&#x27;</span>)</span><br><span class="line">    exam_questions = db.relationship(<span class="string">&#x27;ExamQuestion&#x27;</span>, backref=<span class="string">&#x27;question&#x27;</span>, cascade=<span class="string">&#x27;all, delete-orphan&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Subject</span>(db.Model):</span><br><span class="line">    __tablename__ = <span class="string">&quot;subjects&quot;</span></span><br><span class="line">    <span class="built_in">id</span> = db.Column(db.Integer, primary_key=<span class="literal">True</span>)</span><br><span class="line">    name = db.Column(db.String(<span class="number">255</span>), nullable=<span class="literal">False</span>, unique=<span class="literal">True</span>)</span><br><span class="line">    exam_duration = db.Column(db.Integer, nullable=<span class="literal">False</span>)</span><br><span class="line">    created_time = db.Column(db.DateTime, default=datetime.utcnow() + timedelta(hours=<span class="number">8</span>))</span><br><span class="line">    updated_time = db.Column(db.DateTime, default=datetime.utcnow() + timedelta(hours=<span class="number">8</span>), onupdate=datetime.utcnow() + timedelta(hours=<span class="number">8</span>))</span><br><span class="line">    <span class="comment"># 添加关系属性，用于删除科目时级联删除科目关联的问题</span></span><br><span class="line">    subject_questions = db.relationship(<span class="string">&#x27;Question&#x27;</span>, backref=<span class="string">&#x27;subject&#x27;</span>, cascade=<span class="string">&#x27;all, delete-orphan&#x27;</span>)</span><br><span class="line">    subject_usersubjects = db.relationship(<span class="string">&#x27;UserSubject&#x27;</span>, backref=<span class="string">&#x27;subject&#x27;</span>, cascade=<span class="string">&#x27;all, delete-orphan&#x27;</span>)</span><br><span class="line">    subject_examrecords = db.relationship(<span class="string">&#x27;ExamRecord&#x27;</span>, backref=<span class="string">&#x27;subject&#x27;</span>, cascade=<span class="string">&#x27;all, delete-orphan&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserSubject</span>(db.Model):</span><br><span class="line">    __tablename__ = <span class="string">&quot;user_subjects&quot;</span></span><br><span class="line">    user_id = db.Column(db.Integer, db.ForeignKey(<span class="string">&#x27;users.id&#x27;</span>), primary_key=<span class="literal">True</span>)</span><br><span class="line">    subject_id = db.Column(db.Integer, db.ForeignKey(<span class="string">&#x27;subjects.id&#x27;</span>), primary_key=<span class="literal">True</span>)</span><br><span class="line">    exam_done = db.Column(db.Boolean, nullable=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Answer</span>(db.Model):</span><br><span class="line">    __tablename__ = <span class="string">&quot;answers&quot;</span></span><br><span class="line">    <span class="built_in">id</span> = db.Column(db.Integer, primary_key=<span class="literal">True</span>)</span><br><span class="line">    question_id = db.Column(db.Integer, db.ForeignKey(<span class="string">&quot;questions.id&quot;</span>), nullable=<span class="literal">False</span>)</span><br><span class="line">    answer_text = db.Column(db.Text, nullable=<span class="literal">False</span>)</span><br><span class="line">    created_time = db.Column(db.DateTime, default=datetime.utcnow() + timedelta(hours=<span class="number">8</span>))</span><br><span class="line">    updated_time = db.Column(db.DateTime, default=datetime.utcnow() + timedelta(hours=<span class="number">8</span>), onupdate=datetime.utcnow() + timedelta(hours=<span class="number">8</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Choice</span>(db.Model):</span><br><span class="line">    __tablename__ = <span class="string">&quot;choices&quot;</span></span><br><span class="line">    <span class="built_in">id</span> = db.Column(db.Integer, primary_key=<span class="literal">True</span>)</span><br><span class="line">    question_id = db.Column(db.Integer, db.ForeignKey(<span class="string">&quot;questions.id&quot;</span>), nullable=<span class="literal">False</span>)</span><br><span class="line">    content = db.Column(db.String(<span class="number">255</span>), nullable=<span class="literal">False</span>)</span><br><span class="line">    is_correct = db.Column(db.Boolean, nullable=<span class="literal">False</span>)</span><br><span class="line">    created_time = db.Column(db.DateTime, default=datetime.utcnow() + timedelta(hours=<span class="number">8</span>))</span><br><span class="line">    updated_time = db.Column(db.DateTime, default=datetime.utcnow() + timedelta(hours=<span class="number">8</span>), onupdate=datetime.utcnow() + timedelta(hours=<span class="number">8</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ExamRecord</span>(db.Model):</span><br><span class="line">    __tablename__ = <span class="string">&quot;exam_records&quot;</span></span><br><span class="line">    <span class="built_in">id</span> = db.Column(db.Integer, primary_key=<span class="literal">True</span>)</span><br><span class="line">    user_id = db.Column(db.Integer, db.ForeignKey(<span class="string">&quot;users.id&quot;</span>), nullable=<span class="literal">False</span>)</span><br><span class="line">    subject_id = db.Column(db.Integer, db.ForeignKey(<span class="string">&quot;subjects.id&quot;</span>), nullable=<span class="literal">False</span>)</span><br><span class="line">    score = db.Column(db.Float, nullable=<span class="literal">False</span>)</span><br><span class="line">    start_time = db.Column(db.DateTime, nullable=<span class="literal">False</span>)</span><br><span class="line">    end_time = db.Column(db.DateTime, nullable=<span class="literal">False</span>)</span><br><span class="line">    created_time = db.Column(db.DateTime, default=datetime.utcnow() + timedelta(hours=<span class="number">8</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 添加关系属性，用于删除考试记录时级联删除考试记录关联的考试问题</span></span><br><span class="line">    exam_questions = db.relationship(<span class="string">&#x27;ExamQuestion&#x27;</span>, backref=<span class="string">&#x27;exam_record&#x27;</span>, cascade=<span class="string">&#x27;all, delete-orphan&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ExamQuestion</span>(db.Model):</span><br><span class="line">    __tablename__ = <span class="string">&quot;exam_questions&quot;</span></span><br><span class="line">    <span class="built_in">id</span> = db.Column(db.Integer, primary_key=<span class="literal">True</span>)</span><br><span class="line">    exam_record_id = db.Column(db.Integer, db.ForeignKey(<span class="string">&quot;exam_records.id&quot;</span>), nullable=<span class="literal">False</span>)</span><br><span class="line">    question_id = db.Column(db.Integer, db.ForeignKey(<span class="string">&quot;questions.id&quot;</span>), nullable=<span class="literal">False</span>)</span><br><span class="line">    user_answer = db.Column(db.Text, nullable=<span class="literal">False</span>)</span><br><span class="line">    is_correct = db.Column(db.Boolean, nullable=<span class="literal">False</span>)</span><br><span class="line">    created_time = db.Column(db.DateTime, default=datetime.utcnow() + timedelta(hours=<span class="number">8</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Log</span>(db.Model):</span><br><span class="line">    __tablename__ = <span class="string">&quot;logs&quot;</span></span><br><span class="line">    <span class="built_in">id</span> = db.Column(db.Integer, primary_key=<span class="literal">True</span>)</span><br><span class="line">    user_id = db.Column(db.Integer, nullable=<span class="literal">False</span>)</span><br><span class="line">    action = db.Column(db.String(<span class="number">255</span>), nullable=<span class="literal">False</span>)</span><br><span class="line">    log_type = db.Column(db.String(<span class="number">50</span>), nullable=<span class="literal">False</span>)</span><br><span class="line">    details = db.Column(db.Text, nullable=<span class="literal">True</span>)</span><br><span class="line">    created_time = db.Column(db.DateTime, default=datetime.utcnow() + timedelta(hours=<span class="number">8</span>))</span><br></pre></td></tr></table></figure>

<p>通过jinja2和routes将数据渲染到html中</p>
<h3 id="7、redis开发"><a href="#7、redis开发" class="headerlink" title="7、redis开发"></a>7、redis开发</h3><p>使用redis缓存提高查询的速度，主要针对question_routes和user_routes进行缓存，在exam_routes,teacher_routes和admin_routes使用缓存加快查询，因为这几个路由的数据量比较大。</p>
<p>对user_routes进行修改</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">read:查询redis中是否有user数据</span><br><span class="line">由于有很多个user数据，并且需要全部取出，在存储时可以存储在list中</span><br><span class="line">list具有顺序，相对来说比较适合</span><br><span class="line">add:向redis中插入数据user（id，username，email）</span><br><span class="line">edit:不需要修改，因为id,username,email都是修改不了的</span><br><span class="line">delete:从列表中删除特定user数据</span><br></pre></td></tr></table></figure>

<p>对question_routes进行修改</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">read:查询redis中是否有questions</span><br><span class="line">add:向redis中插入数据questions和options</span><br><span class="line">edit:修改questions和options</span><br><span class="line">delete:删除questions和options</span><br></pre></td></tr></table></figure>

<p>对exam_routes进行修改</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在加载题目时优先从redis中加载</span><br></pre></td></tr></table></figure>

<p>样例</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">choices:</span><br><span class="line">&#123;&quot;id&quot;: 17, &quot;question_id&quot;: 16, &quot;content&quot;: &quot;11111111&quot;, &quot;is_correct&quot;: true&#125;</span><br><span class="line">questions:</span><br><span class="line">&#123;&quot;id&quot;: 12, &quot;title&quot;: &quot;qwe&quot;, &quot;description&quot;: &quot;qwer&quot;, &quot;type&quot;: &quot;true_false&quot;, &quot;difficulty&quot;: &quot;easy&quot;, &quot;subject&quot;: &quot;\u8ba1\u7b97\u673a&quot;, &quot;creator&quot;: 4&#125;</span><br><span class="line">users:</span><br><span class="line">&#123;&quot;id&quot;: 9, &quot;username&quot;: &quot;123&quot;, &quot;email&quot;: &quot;123@qq.com&quot;, &quot;role&quot;: &quot;student&quot;&#125;</span><br></pre></td></tr></table></figure>

<h3 id="8、前后端与数据库结合"><a href="#8、前后端与数据库结合" class="headerlink" title="8、前后端与数据库结合"></a>8、前后端与数据库结合</h3><h4 id="前端"><a href="#前端" class="headerlink" title="前端"></a>前端</h4><p>前端接收从后端传入的数据，并使用form+ajax的形式将数据传输到后端</p>
<h4 id="后端"><a href="#后端" class="headerlink" title="后端"></a>后端</h4><p>admin_routes：通过flask_session检验用户是否为admin身份，然后通过查询数据库中user的基本信息，将数据传入到admin.html</p>
<p>auth_routes：用于验证用户状态。</p>
<p>1、register：分为get和post两种状态。get返回注册页面；post读取表单传入的user信息，校验两次输入的密码是否一致，检查用户或者邮箱是否已经存在。检验通过，将新用户写入mysql的user表，然后写入redis的users列表中，再将注册事件写入log表，跳转到注册成功页面。（直接注册的用户没有绑定科目，需要使用admin权限进行绑定）</p>
<p>2、login：分为get和post两种状态。get返回登录页面；post读取表单传入的user信息，从数据库中查询该用户，检查用户是否存在，密码是否正确。密码正确，生成flask_session，更新数据库中用户的数据，（ip和登录时间，这里不需要更新redis，因为login只会更新ip和登陆时间，这些没有写入redis中），log写入login事件，跳转到dashboard，再通过role进行判断跳转到不同的主页</p>
<p>3、logout：只接受post请求，如果用户还没有登录则返回到登录页面。如果已经登录，且为post请求，并且确认要退出的话，清除session，log写入logout事件</p>
<p>exam_routes：只接受post请求。检查用户是否登录，已登录检查用户是否为student。post请求分为两种action。</p>
<p>1、start：表示考试开始。首先通过表单中的科目查询考试的持续时间，再查询考试是否已经完成。如果未完成，先检查redis中是否存在题目数据，如果不存在再从mysql中获取题目数据。将答题记录写入exam_records，先检查是否是第一次进入考试（如果没有提交就算考试没完成），因为exam_recodes只能存在一条，所以如果已经存在则改为更新数据。log写入start事件。<br>（由于此处的持续时间是在前端实现的自动提交，所以其实是个聊胜于无的东西，但是这里由于时间原因就没有修改了）</p>
<p>2、submit：表示提交答案。同样的检查考试是否完成。如果未完成，获取提交的答案，通过question_id从answer中获得正确答案，将提交的答案转化为正确的答案格式，跟正确答案进行比对，计算出分数。将答题记录写入exam_question表，将分数和考试结束时间写入exam_records表，将user_subject表中的exam_done修改为true。log写入submit事件</p>
<p>index_routes：用于处理各种繁杂功能的路由。</p>
<p>1、index：如果用户未登录，返回到主页；如果用户已经登录，转到用户主页。</p>
<p>2、dashboard：如果用户未登录，返回到登录页；如果用户已经登录，准到yoghurt主页。</p>
<p>3、<code>&lt;path:path&gt;</code>：通配符，将未定义的页面都返回到主页</p>
<p>question_routes：用于处理question表。只接收post请求，先检查用户是否登录再检查用户是否为学生。如果用户为老师，只能修改绑定科目的题目，如果为admin，则无限制。分为四种action。</p>
<p>1、read：如果是老师，查询对应的科目，再查询题目，先对redis进行查询，再从mysql中查询。如果是管理员，直接查询题目，先对redis进行查询，再从mysql中查询。log写入read事件。</p>
<p>2、add：先检查问题的题目是否重复。如果用户为老师，检查科目是否为老师的绑定科目，再检查科目是否存在。检验通过，获取表单数据，根据题目类型进行分类。如果题目为单选题，检查答案是否为一个，检查答案是否在abcd的范围内，检验通过，写入question数据到mysql，写入question数据到redis，log写入add事件，写入choice数据到mysql，写入choice数据到redis，log写入add事件，写入answer数据到mysql，log写入add事件；如果题目为多选题，检查答案是否多于一个，检查答案是否在abcd的范围内，对答案进行去重，排序和字符串转换，转为正确的答案格式，写入数据和日志；如果题目为判断题，判断答案是否为true或者false，写入数据和日志；如果题目为填空题，写入数据和日志。</p>
<p>3、edit：检查题目是否存在。如果用户为teacher，检查teacher是否绑定科目，是否为创建者。检查科目是否存在以及是否匹配，检查题目类型是否匹配。接收表单数据，能修改的只有题干和题目难度和答案，接收数据更新mysql和redis。写入日志。</p>
<p>4、delete：检查题目是否存在。检查teacher用户是否为创建者。删除mysql和redis中数据，写入日志。</p>
<p>student_routes：检查是否登录，检查是否是学生，获取学生信息</p>
<p>subject_routes：只接受post请求，先检查是否登录，再检查是否为admin，存在四种action。（由于科目一般不是特别多就没上redis）</p>
<p>1、read：读取所有科目，写入日志。</p>
<p>2、add：表单获取数据，检查科目是否已经存在，添加科目到mysql，写入日志。</p>
<p>3、edit：表单获取数据，检查科目是否存在，存在的话进行修改，可以对持续时间进行修改。（当然我前面也说了这个功能基本没用）写入数据和日志到mysql</p>
<p>4、delete：表单获取数据，检查科目是否存在，存在的话删除，写入数据和日志到mysql。</p>
<p>teacher.routes：检查用户是否登录，检查是否为老师，查询数据插入template</p>
<p>user_routes：检查用户是否登录且为admin，只接受post请求，有四种action。</p>
<p>1、read：先从redis查询再从mysql查询，写入日志。</p>
<p>2、add：从表单获取数据，检查用户是否已经存在，不存在则添加数据到mysql和redis，再绑定科目，写入数据到user_subject，绑定科目需要去重。写入进行add操作的日志和add的日志。（写入redis的是id，email，role）</p>
<p>3、edit：获取数据，检查用户是否存在，绑定新的科目。写入进行edit操作的日志和edit的日志。</p>
<p>4、delete：获取数据，检查用户是否存在且用户名是否为admin，删除mysql和redis中的数据，写入日志。</p>
<h3 id="9、部署流程"><a href="#9、部署流程" class="headerlink" title="9、部署流程"></a>9、部署流程</h3><p>由于在windows忘记用虚拟环境了，所以requirements.txt里面的库可能不是很全</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">python3 run.py</span><br><span class="line">(报错的话缺哪个库就安装哪个，如果没报错就停止然后直接下面的数据库初始化，当然mysql里面要先建好数据库)</span><br><span class="line">flask db init</span><br><span class="line">flask db migrate -m &quot;Initial&quot;</span><br><span class="line">flask db upgrade</span><br><span class="line">再执行</span><br><span class="line">python3 run.py</span><br><span class="line">浏览器访问127.0.0.1:5000，你要是有兴趣开内网也可以自己开（</span><br></pre></td></tr></table></figure>

<h2 id="课设链接"><a href="#课设链接" class="headerlink" title="课设链接"></a>课设链接</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/zx2023qj/database_keshe</span><br></pre></td></tr></table></figure>

</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://zx2023qj.github.io">zx</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://zx2023qj.github.io/2024/12/19/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%9E%E9%AA%8C-%E8%AF%BE%E8%AE%BE/">https://zx2023qj.github.io/2024/12/19/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%9E%E9%AA%8C-%E8%AF%BE%E8%AE%BE/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://zx2023qj.github.io" target="_blank">zx's Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%97%A5%E5%B8%B8/">日常</a><a class="post-meta__tags" href="/tags/%E4%BD%9C%E4%B8%9A/">作业</a></div><div class="post_share"><div class="social-share" data-image="/img/3.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/12/27/c%E7%9B%98%E6%B8%85%E7%90%86/" title="从来没有觉得清理c盘快乐过"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">从来没有觉得清理c盘快乐过</div></div></a></div><div class="next-post pull-right"><a href="/2024/12/18/ciscn2024-%C3%97-ccb/" title="ciscn2024 × ccb"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">ciscn2024 × ccb</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2024/11/14/BIM-CIM%E8%AE%BE%E8%AE%A1/" title="BIM&#x2F;CIM设计"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-11-14</div><div class="title">BIM&#x2F;CIM设计</div></div></a></div><div><a href="/2024/12/27/%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%AE%9E%E9%AA%8C%E4%B8%8E%E8%AF%BE%E8%AE%BE/" title="嵌入式实验与课设"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-12-27</div><div class="title">嵌入式实验与课设</div></div></a></div><div><a href="/2024/09/02/%E5%BF%83%E6%83%85%E4%B8%8D%E5%A5%BD%E5%86%99%E7%82%B9/" title="心情不好写点 &amp; 2024年8月总结"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-09-02</div><div class="title">心情不好写点 &amp; 2024年8月总结</div></div></a></div><div><a href="/2024/09/05/%E5%86%8D%E6%B0%B4%E4%B8%80%E7%AF%87%E6%97%A5%E5%B8%B8/" title="再水一篇日常"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-09-05</div><div class="title">再水一篇日常</div></div></a></div><div><a href="/2024/09/18/2024%E4%B8%AD%E7%A7%8B/" title="2024中秋"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-09-18</div><div class="title">2024中秋</div></div></a></div><div><a href="/2024/10/04/2024%E5%9B%BD%E5%BA%86/" title="2024国庆"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-10-04</div><div class="title">2024国庆</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/3.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">zx</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">41</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">35</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">23</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/zx2023qj"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%9E%E9%AA%8C"><span class="toc-number">1.</span> <span class="toc-text">数据库实验</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81opengauss%E6%95%B0%E6%8D%AE%E5%BA%93%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85"><span class="toc-number">1.1.</span> <span class="toc-text">1、opengauss数据库环境安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81opengauss%E5%9C%BA%E6%99%AF%E5%8C%96%E7%BB%BC%E5%90%88%E5%BA%94%E7%94%A8%E5%AE%9E%E9%AA%8C"><span class="toc-number">1.2.</span> <span class="toc-text">2、opengauss场景化综合应用实验</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81openGauss%E8%87%AA%E9%80%89%E9%A2%98%E5%BA%94%E7%94%A8%E5%AE%9E%E9%AA%8C"><span class="toc-number">1.3.</span> <span class="toc-text">3、openGauss自选题应用实验</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81%E5%8D%8E%E4%B8%BA-openGauss-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%80%A7%E8%83%BD%E6%A3%80%E6%9F%A5%E5%AE%9E%E9%AA%8C"><span class="toc-number">1.4.</span> <span class="toc-text">4、华为 openGauss 数据库性能检查实验</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81%E4%BD%BF%E7%94%A8JDBC%E8%BF%9E%E6%8E%A5openGauss%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.5.</span> <span class="toc-text">5、使用JDBC连接openGauss数据库</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AF%BE%E7%A8%8B%E8%80%83%E5%AF%9F%E4%B8%8E%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1"><span class="toc-number">2.</span> <span class="toc-text">数据库课程考察与课程设计</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E5%BC%80%E5%8F%91%E5%89%8D%E5%90%8E%E7%AB%AF%E7%95%8C%E9%9D%A2"><span class="toc-number">2.1.</span> <span class="toc-text">1、开发前后端界面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">2.2.</span> <span class="toc-text">2、连接数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E6%98%8E%E7%A1%AE%E5%8A%9F%E8%83%BD"><span class="toc-number">2.3.</span> <span class="toc-text">3、明确功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81%E5%89%8D%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91"><span class="toc-number">2.4.</span> <span class="toc-text">4、前后端开发</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BB%93%E6%9E%84"><span class="toc-number">2.5.</span> <span class="toc-text">5、数据库结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6%E3%80%81mysql%E5%BC%80%E5%8F%91"><span class="toc-number">2.6.</span> <span class="toc-text">6、mysql开发</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7%E3%80%81redis%E5%BC%80%E5%8F%91"><span class="toc-number">2.7.</span> <span class="toc-text">7、redis开发</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8%E3%80%81%E5%89%8D%E5%90%8E%E7%AB%AF%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BB%93%E5%90%88"><span class="toc-number">2.8.</span> <span class="toc-text">8、前后端与数据库结合</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%89%8D%E7%AB%AF"><span class="toc-number">2.8.1.</span> <span class="toc-text">前端</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%8E%E7%AB%AF"><span class="toc-number">2.8.2.</span> <span class="toc-text">后端</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9%E3%80%81%E9%83%A8%E7%BD%B2%E6%B5%81%E7%A8%8B"><span class="toc-number">2.9.</span> <span class="toc-text">9、部署流程</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%BE%E8%AE%BE%E9%93%BE%E6%8E%A5"><span class="toc-number">3.</span> <span class="toc-text">课设链接</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/04/01/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/" title="每日一题">每日一题</a><time datetime="2025-04-01T13:00:28.000Z" title="发表于 2025-04-01 21:00:28">2025-04-01</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/03/26/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" title="数据结构">数据结构</a><time datetime="2025-03-26T05:26:18.000Z" title="发表于 2025-03-26 13:26:18">2025-03-26</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/03/22/Reversing-Secrets-of-Reverse-Engineering/" title="Reversing Secrets of Reverse Engineering">Reversing Secrets of Reverse Engineering</a><time datetime="2025-03-22T14:35:57.000Z" title="发表于 2025-03-22 22:35:57">2025-03-22</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/03/22/%E8%AE%A1%E7%BB%84/" title="计组">计组</a><time datetime="2025-03-22T02:31:45.000Z" title="发表于 2025-03-22 10:31:45">2025-03-22</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/03/08/%E6%95%B0%E4%B8%80/" title="数一">数一</a><time datetime="2025-03-08T14:27:47.000Z" title="发表于 2025-03-08 22:27:47">2025-03-08</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2025 By zx</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>